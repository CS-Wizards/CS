# 네트워크와 데이터베이스 정리

## 라우터 내의 포워딩 과정

### 라우팅
라우팅은 송신자가 수신자에게 패킷을 전송할 때, 네트워크 계층(Network Layer)에서 패킷 경로를 설정하는 과정입니다. 즉, 패킷의 목적지 IP를 기반으로 경로를 찾아내 포워딩 테이블을 작성하는 것을 의미합니다.

### 포워딩
포워딩은 패킷이 라우터의 입력 링크에 도달했을 때, 라우터가 그 패킷을 적절한 출력 링크로 이동시키는 과정을 말합니다.

### 라우팅 알고리즘
- **정적 라우팅 알고리즘**: 실시간 상태 반영 없이 현재의 상태에서 최적의 경로를 찾는 알고리즘.
- **동적 라우팅 알고리즘**: 실시간으로 라우터의 상태를 감지하여 경로를 변경하는 알고리즘.

### 포워딩 테이블의 구조
포워딩 테이블은 각 입력 링크에서 패킷을 수신했을 때 해당 패킷을 출력할 링크를 결정하는 데 사용되는 데이터를 포함합니다.
![image](https://github.com/user-attachments/assets/cd98c189-338d-4a47-a083-2e0b0c7e5b27)
## 로드밸런서

### L4 로드밸런서와 L7 로드밸런서의 차이
- **L4 로드밸런서**: 전송 계층(Transport Layer, Layer 4)에서 작동하며, 주로 TCP 및 UDP 프로토콜을 기반으로 클라이언트와 서버 간 트래픽을 분산시킴.
- **L7 로드밸런서**: 애플리케이션 계층(Application Layer, Layer 7)에서 작동하며, HTTP 및 HTTPS 프로토콜을 기반으로 클라이언트와 서버 간 트래픽을 분산시킴. 요청 내용(URL, 헤더, 쿠키 등)을 기반으로 로드 밸런싱을 수행함.
![image](https://github.com/user-attachments/assets/73d4faf7-4ab3-46e6-b8df-fe662f4c5a7a)
### 로드밸런서 알고리즘
- **라운드 로빈 방식**: 클라이언트로부터 받은 요청을 순서대로 서버에 할당.
- **가중 라운드 로빈 방식**: 서버의 처리 용량에 따라 가중치를 부여하여 요청을 할당.
- **최소 연결 방식**: 연결 수가 가장 적은 서버에 요청을 할당.

### 헬스 체크(Health Check)
로드밸런싱 대상이 되는 장치중 일부 장치가 문제가 생겨 접속이 불가능할 경우, 로드밸런서가 해당 장비로 요청을 보내지 않도록 하는 방법
로드밸런서가 문제가 있는 장치로 요청을 보내지 않도록 하기 위해서는 헬스 체크(Health Check) 기능을 사용해야 합니다. 헬스 체크는 로드밸런서가 백엔드 서버 또는 장치의 상태를 주기적으로 확인하여, 상태가 양호한 서버에만 트래픽을 분배할 수 있도록 해줍니다.
헬스 체크는 로드밸런서가 백엔드 서버 또는 장치의 상태를 주기적으로 확인하여, 상태가 양호한 서버에만 트래픽을 분배할 수 있도록 해주는 기능입니다.

![image](https://github.com/user-attachments/assets/82a82233-fc94-4898-9ec0-15cfc5d35541)
![image](https://github.com/user-attachments/assets/c33c7031-ee4b-43c0-a48f-bddf0a498977)
![image](https://github.com/user-attachments/assets/290e7aaf-cac0-46de-b1a1-461d344415d8)
![image](https://github.com/user-attachments/assets/9cc52ca3-fcfb-4472-831e-a221f883cf53)
![image](https://github.com/user-attachments/assets/11c476c5-d16e-408c-9390-819f19a17559)
### DNS 로드 밸런싱
DNS 로드 밸런싱은 도메인의 리소스 풀에서 네트워크 요청을 라우팅하도록 도메인을 구성하는 방식입니다. 이를 통해 전역적으로 분산된 리소스 풀에서 트래픽을 분산할 수 있습니다.

## 서브넷 마스크와 게이트웨이

### 게이트웨이
게이트웨이는 라우터의 주소로, 네트워크와 네트워크를 연결하는 장비입니다. 라우터는 공인 IP와 사설 IP를 모두 가질 수 있으며, 사설 IP가 바로 게이트웨이입니다.
![image](https://github.com/user-attachments/assets/fce503f6-ed67-48f8-b6f8-74fdf3b6c5d1)
### 서브넷 마스크
서브넷 마스크는 IP 주소에서 네트워크 식별자와 호스트 식별자를 구분하는 역할을 합니다. 예를 들어, `255.255.255.0`은 앞의 3칸이 네트워크 식별자이고, 마지막 칸이 호스트 식별자입니다.
![image](https://github.com/user-attachments/assets/c48a5886-d41a-4e19-9de0-a80215b6688d)
## NAT (Network Address Translation)

### NAT의 주요 목적
- **IP 주소 절약**: 여러 사설 IP 주소가 하나의 공인 IP 주소를 공유할 수 있습니다.
- **보안 강화**: 사설 네트워크를 외부 네트워크로부터 숨겨줍니다.
- **네트워크 관리 편의**: 사설 네트워크 내의 IP 주소 체계를 자유롭게 관리할 수 있습니다.

### NAT의 작동 원리
- **출발지 NAT (SNAT)**: 사설 네트워크의 기기가 인터넷으로 데이터를 전송할 때, 출발지 IP 주소를 공인 IP 주소로 변경합니다.
- **목적지 NAT (DNAT)**: 외부 네트워크에서 사설 네트워크로 데이터를 보낼 때, 목적지 IP 주소를 사설 IP 주소로 변환합니다.
- **PAT (Port Address Translation)**: 여러 사설 IP 주소가 하나의 공인 IP 주소를 공유할 때, 포트 번호를 이용하여 각각의 트래픽을 구분합니다.

## 트랜잭션과 ACID 원칙

### ACID 원칙
- **원자성(Atomicity)**: 트랜잭션이 모두 반영되거나 전혀 반영되지 않아야 한다.
- **일관성(Consistency)**: 트랜잭션 전후에 데이터베이스가 일관된 상태를 유지해야 한다.
- **독립성(Isolation)**: 동시에 실행되는 트랜잭션이 서로 영향을 주지 않아야 한다.
- **지속성(Durability)**: 성공적으로 완료된 트랜잭션의 결과가 영구적으로 반영되어야 한다.

### Durability를 보장하는 방법
- **로그(Log)**: 트랜잭션과 관련된 모든 변경 사항을 기록하며, 장애 발생 시 데이터베이스를 복구하는 데 사용됩니다.
- **체크포인트(Checkpoint)**: 특정 시점의 데이터베이스 상태를 디스크에 안전하게 저장하는 작업입니다.

### 트랜잭션 격리 수준
트랜잭션의 격리 수준(Isolation Level)은 특정 트랜잭션이 다른 트랜잭션에서 변경하거나 조회하는 데이터를 볼 수 있게 허용할지 여부를 결정합니다.
- **SERIALIZABLE**: 가장 높은 격리 수준.
- **REPEATABLE READ**: 트랜잭션 내에서 동일한 결과를 반환.
- **READ COMMITTED**: 커밋된 데이터만 읽기 가능.
- **READ UNCOMMITTED**: 커밋되지 않은 데이터도 읽기 가능.

## MySQL에서의 UNDO와 REDO

### UNDO
UNDO 로그는 트랜잭션이 롤백될 경우 데이터베이스를 이전 상태로 복구하기 위해 사용됩니다. 트랜잭션 격리 수준을 보장하며, 주로 MVCC(Multi Version Concurrency Control) 방식으로 관리됩니다.

### REDO
REDO 로그는 트랜잭션의 영속성을 보장하기 위한 로그로, 커밋된 트랜잭션의 데이터를 복구하는 데 사용됩니다.

## 스토리지 엔진

스토리지 엔진은 DBMS가 데이터베이스에 대해 데이터를 삽입, 추출, 업데이트 및 삭제하는 데 사용하는 기본 소프트웨어 컴포넌트입니다. MySQL은 MyISAM과 InnoDB 같은 다양한 스토리지 엔진을 지원하며, 테이블마다 다른 스토리지 엔진을 지정할 수 있습니다.


